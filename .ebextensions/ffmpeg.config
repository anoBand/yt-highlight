# .ebextensions/ffmpeg.config
packages:
  yum:
    compat-ffmpeg28: [] # This is often an older version but might be sufficient
    # OR, for potentially newer versions, try enabling a topic from amazon-linux-extras

commands:
  01_enable_ffmpeg_extra:
    # This command tries to enable a topic that provides ffmpeg.
    # The specific topic name might vary or not exist.
    # Common ones include 'ffmpeg' or multimedia-related topics.
    # We'll try 'epel' first as it's a common provider.
    command: "sudo amazon-linux-extras install -y epel"
    # Test if epel is enabled; a more robust test would be to check if ffmpeg can be installed afterwards
    test: "! yum repolist | grep -q epel" # Run if epel is NOT already in repolist
  02_install_ffmpeg_from_epel:
    # Attempt to install ffmpeg after ensuring epel is enabled
    command: "sudo yum install -y ffmpeg"
    # Test if ffmpeg command is now available
    test: "! ffmpeg -version"