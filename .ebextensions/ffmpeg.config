# .ebextensions/01_ffmpeg.config

commands:
  01_install_epel:
    # EPEL 저장소를 설치합니다. Amazon Linux 2에서 권장되는 방식입니다.
    command: "sudo amazon-linux-extras install -y epel"
    ignoreErrors: true
  02_install_rpmfusion_free:
    # RPM Fusion (free) 저장소를 설치합니다.
    command: "sudo yum install -y https://download1.rpmfusion.org/free/el/rpmfusion-free-release-7.noarch.rpm"
    ignoreErrors: true
  03_install_rpmfusion_nonfree:
    # 코덱 등을 위해 non-free 저장소도 함께 설치해주는 것이 안정적입니다.
    command: "sudo yum install -y https://download1.rpmfusion.org/nonfree/el/rpmfusion-nonfree-release-7.noarch.rpm"
    ignoreErrors: true
  04_yum_clean_all:
    # 패키지 설치 전, yum 캐시를 모두 정리하여 최신 상태를 반영합니다.
    command: "sudo yum clean all"

packages:
  yum:
    ffmpeg: []
    ffmpeg-devel: []